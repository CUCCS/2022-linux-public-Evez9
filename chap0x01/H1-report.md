#   实验目的与自评  

建立一定Linux基础，熟化命令行使用，对SSH与远程服务器管理有进一步理解。  

本次实验报告部分自评6-7分，一、三、四项能够较好地完成，第二项存在瑕疵，总体而言能认真耐心地完成作业，收获颇丰。  


#   实验步骤与结果

**实验环境** 虚拟机中下载的老师给的百度云链接 Linux Ubuntu20.04 以及 阿里云提供的Linux指令入门操作平台

##  · 调查并记录实验环境的如下信息：当前 Linux 发行版基本信息、当前 Linux 内核版本信息  

查询当前 Linux *发行版*基本信息命令： **lsb_release -a**    

![当前 Linux 发行版基本信息](/img/%E5%BD%93%E5%89%8D%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF.jpg "当前 Linux 发行版基本信息")
(用黄色标明了主要命令，虚拟机和阿里云平台)  

查询当前 Linux *内核版本*信息命令： **uname -a** ；**uname -r**    

![当前 Linux 发行版基本信息](/img/%E5%BD%93%E5%89%8D%20Linux%20%E5%86%85%E6%A0%B8%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF.jpg "当前 Linux 发行版基本信息")
(用黄色标明了主要命令，虚拟机和阿里云平台)  


##  · Virtualbox 安装完 Ubuntu 之后新添加的网卡如何实现系统开机自动启用和自动获取 IP？  

Ubuntu20.04系统开机后网卡能够自动启用和自动获取 IP    

![系统开机自动启用和自动获取IP](/img/%E7%B3%BB%E7%BB%9F%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E5%90%AF%E7%94%A8%E5%92%8C%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96%20IP.jpg "系统开机自动启用和自动获取IP")  

新添加的网卡 先通过 ifconfig(工作网卡) 和 ifconfig -a(所有网卡) 命令后的显示情况判断是哪个网卡没有生效  
==此处通过畅课评论区老师同学们的讨论后进行修改 应用 **ip** 取代 ifconfig==    

输入指令 **sudo vim /etc/netplan/00-installer-config.yaml**  

手动*添入没有生效的网卡* 并在其后输入 **dhcp4: true**    

![查看所有网卡](/img/%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%BD%91%E5%8D%A1.jpg "查看所有网卡")  
(用黄色标明了主要命令以及所有网卡)  

![查看所有在工作的网卡](/img/%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E5%9C%A8%E5%B7%A5%E4%BD%9C%E7%9A%84%E7%BD%91%E5%8D%A1.jpg "查看所有在工作的网卡")  
(用黄色标明了主要命令以及在工作的网卡)  

==更正方法后==  

![更正查看网卡的方法](/img/%E6%9B%B4%E6%AD%A3%E6%9F%A5%E7%9C%8B%E7%BD%91%E5%8D%A1%E7%9A%84%E6%96%B9%E6%B3%95.jpg "更正查看网卡的方法")  


##  · 如何使用 scp 在「虚拟机和宿主机之间」、「本机和远程 Linux 系统之间」传输文件？  

首先创建文件  

![阿里云环境创建文件](/img/%E9%98%BF%E9%87%8C%E4%BA%91%E7%8E%AF%E5%A2%83%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6.jpg "阿里云环境创建文件")  


传输文件命令： **scp 文件 文件目的地IP地址:/路径**   

![宿主机传输文件至虚拟机](/img/%E5%AE%BF%E4%B8%BB%E6%9C%BA%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6%E8%87%B3%E8%99%9A%E6%8B%9F%E6%9C%BA.jpg "宿主机传输文件至虚拟机")  
(宿主机传输文件至虚拟机，用红色标明了主要命令)  

![虚拟机传输文件至宿主机](/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6%E8%87%B3%E5%AE%BF%E4%B8%BB%E6%9C%BA.jpg "虚拟机传输文件至宿主机")  
(虚拟机传输文件至宿主机，用红色标明了主要命令)  

![远程Linux系统传输文件至本机](/img/%E8%BF%9C%E7%A8%8B%20Linux%20%E7%B3%BB%E7%BB%9F%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6%E8%87%B3%E6%9C%AC%E6%9C%BA.jpg "远程Linux系统传输文件至本机")  
(远程Linux系统传输文件至本机，用红色标明了主要命令)  

![本机传输文件至远程Linux系统](/img/%E6%9C%AC%E6%9C%BA%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6%E8%87%B3%E8%BF%9C%E7%A8%8B%20Linux%20%E7%B3%BB%E7%BB%9F.jpg "本机传输文件至远程Linux系统")  
(本机传输文件至远程Linux系统，用红色标明了主要命令)  


##  · 如何配置 SSH 免密登录？  

首先使用 **ssh-keygen** 命令生成密钥  

通过 **cd .ssh/** 进入文件夹 输入 **ls** 查看该目录下的文件 分别为：  

*authorized_keys*: 存放远程免密登录的公钥,主要通过这个文件记录多台机器的公钥。  

*id_rsa*: 生成的私钥文件  

*id_rsa.pub*: 生成的公钥文件  

*known_hosts*: 已知的主机公钥清单  

接着通过命令 **ssh-copy-id -i ~/.ssh/id_rsa.pub root@xxx.xxx.x.xxx(所要免密登录服务器IP地址)**  

接着输入 **ssh '所要免密登录服务器IP地址'** 若*无需*输入密码 即完成了免密登录的配置  

![本机配置ssh免密登录阿里云平台](/img/%E9%85%8D%E7%BD%AEssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95%EF%BC%88%E9%98%BF%E9%87%8C%E4%BA%91%E5%B9%B3%E5%8F%B0%EF%BC%89.jpg "本机配置ssh免密登录阿里云平台")  
(本机配置ssh免密登录阿里云平台)    

![虚拟机配置ssh免密登录](/img/%E9%85%8D%E7%BD%AEssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95(%E8%99%9A%E6%8B%9F%E6%9C%BA).jpg "虚拟机配置ssh免密登录")  
(虚拟机配置ssh免密登录)  

![虚拟机配置ssh免密登录成功](/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95.jpg "虚拟机配置ssh免密登录成功")  
(虚拟机配置ssh免密登录成功)  



#   问题分析与解决  

作业中出现的都是一些细节性的问题，并没有出现特别棘手的问题。

(以下图片标红的是报错)

1. 输入错误：应该是*cuc@...* 误打成了cucu@...

![输入错误](/img/%E8%BE%93%E5%85%A5%E9%94%99%E8%AF%AF.jpg "输入错误")

2. 语法错误：应该是:/root 错误地打成了:root/
   ==要注意命令行中的空格, - , _ , / , \ 等易出现错误的地方==

![语法错误](/img/%E8%AF%AD%E6%B3%95%E9%94%99%E8%AF%AF.jpg "语法错误")

3. 路径错误： 应在.ssh的文件夹中寻找文件 
   解决方法： *cd .ssh/* 进入该目录
   ==创建文件和寻找文件的时候要保证自己正处于正确的目录下==

![路径错误](/img/%E8%B7%AF%E5%BE%84%E9%94%99%E8%AF%AF.jpg "路径错误")

4. 理解错误：在按照教程完成了虚拟机的免密登录后发现登入虚拟机仍需要输入密码，重复操作配置ssh免密登录两次后还是如此，向同学请教才明白，这是登入账号的正常操作，与有没有配置ssh免密登录无关。

![理解错误](/img/%E7%90%86%E8%A7%A3%E9%94%99%E8%AF%AF.jpg "理解错误")



#   参考链接  

[当前Linux发行版基本信息、内核版本信息参考文件](https://blog.csdn.net/peng2hui1314/article/details/108851837 "Linux 查看当前系统的内核与发行版本信息")  

[新添加的网卡实现系统开机自动启用和自动获取IP参考文件](https://blog.csdn.net/xiongyangg/article/details/110206220 "ubuntu20添加新网卡后设置自动启用并获取ip")  

[使用scp传输文件参考文件](https://zhuanlan.zhihu.com/p/201086165 "Linux scp命令")  

[配置SSH免密登录参考文件1](https://blog.csdn.net/weixin_51184877/article/details/110957649 "[ 免密 ] 虚拟机免密登录的操作步骤！")  

[配置SSH免密登录参考文件2](https://www.cnblogs.com/hanwen1014/p/9048717.html "SSH配置——Linux下实现免密码登录")  

[Markdown语法学习](https://markdown.com.cn/ "Markdown官方教程")  

